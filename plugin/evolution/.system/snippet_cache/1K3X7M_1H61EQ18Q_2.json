{"self":{"props":{"type":"Box"}},"html":"<div lx class=\"lx-abspos lxps-grid-v\" style=\"right:0%;left:0%;bottom:0%;top:0%;padding-top:10px;padding-bottom:10px;padding-left:10px;padding-right:10px;grid-row-gap:10px;grid-template-rows:auto 40px;\"><div lx class=\"lxps-grid-v\" style=\"position:relative;min-height:40px;overflow:auto;\"><\/div><div lx class=\"lxps-grid-v\" style=\"position:relative;min-height:40px;grid-template-columns:repeat(2,1fr);grid-row-gap:10px;grid-column-gap:10px;grid-template-rows:repeat(1,1fr);\"><div lx class=\"lx-Button\" style=\"position:relative;min-height:40px;min-width:40px;grid-area:1\/1\/2\/2;\"><div lx class=\"lx-TextBox\" style=\"width:auto;height:auto;\">\u0420\u0435\u0432\u0430\u043d\u0448<\/div><\/div><div lx class=\"lx-Button\" style=\"position:relative;min-height:40px;min-width:40px;grid-area:1\/2\/2\/3;\"><div lx class=\"lx-TextBox\" style=\"width:auto;height:auto;\">\u0417\u0430\u043a\u0440\u044b\u0442\u044c<\/div><\/div><\/div><\/div>","lx":[{"geom":"1,3|5,7","type":"Box","renderIndex":0,"__ps":"lx.StreamPositioningStrategy;ds:1;if:3;i:10px,10px,10px,10px,10px,10px;t:2;d:1"},{"key":"resultMatrix","streamSize":"auto","type":"Box","renderIndex":1,"__ps":"lx.StreamPositioningStrategy;ds:1;if:3;t:1;d:1"},{"streamSize":"40px","type":"Box","renderIndex":2,"__ps":"lx.GridPositioningStrategy;ds:1;if:3;i:10px,10px,0,0,0,0;c:2;t:2;m:11"},{"key":"butRestart","type":"Button","renderIndex":3},{"key":"text","geom":"2,1|6,5","type":"TextBox","renderIndex":4},{"key":"butExit","type":"Button","renderIndex":5},{"key":"text","geom":"2,1|6,5","type":"TextBox","renderIndex":6}],"js":"const results = (function(){ let c=new lx.ModelCollection; class _am_ extends lx.BindableModel {static __setSchema(){this.initSchema({gamer:{},score:{},dropping\n\t:{}});}}if(_am_.__afterDefinition)_am_.__afterDefinition(); c.setModelClass(_am_); return c; })();\n\n\tlet resultMatrix = Snippet.find('resultMatrix');\n\tresultMatrix.getEnvironment = function() {\n\t\treturn this.env;\n\t};\n\tresultMatrix.showResult = function(result) {\n\t\tresults.reset(result);\n\t\tSnippet.find('butRestart').text('\u0420\u0435\u0432\u0430\u043d\u0448');\n\t\tSnippet.find('butRestart').disabled(false);\n\t\tPlugin.find('resultBox').show();\n\t};\n\tresultMatrix.matrix({\n\t\titems: results,\n\t\titemBox: [lx.Box, {grid:{indent:'10px'}}],\n\t\titemRender: function(box, model) {\n\t\t\tlet gamer = resultMatrix.getEnvironment().game.getGamerById(model.gamer);\n\t\t\t(new lx.Box({width:8, text:gamer.getName()})).align(lx.CENTER, lx.MIDDLE);\n\t\t\t(new lx.Box({width:4, text:model.score + ' (' + model.dropping + ')'})).align(lx.CENTER, lx.MIDDLE);\n\t\t}\n\t});\n\n\tSnippet.find('butRestart').click(()=>{\n\t\tlet env = resultMatrix.getEnvironment();\n\t\tenv.triggerChannelEvent('approve-revenge', {gamer: env.game.getLocalGamer().getId()});\n\t});\n\n\tSnippet.find('butExit').click(()=>{\n\t\tPlugin.root.parent.del();\n\t});"}