{"self":{"style":{"visibility":"hidden"},"props":{"type":"Box"}},"html":"<div lx class=\"lx-abspos\" style=\"width:20%;left:40%;height:30%;top:35%;background-color:white;\"><\/div><div lx class=\"lx-abspos\" style=\"right:0%;left:0%;bottom:0%;top:0%;background-color:black;opacity:0.5;\"><\/div><div lx class=\"lx-abspos lxps-grid-v\" style=\"width:20%;left:40%;height:30%;top:35%;grid-template-columns:repeat(4,1fr);padding-top:10px;padding-bottom:10px;padding-left:10px;padding-right:10px;grid-row-gap:10px;grid-column-gap:10px;grid-template-rows:repeat(3,1fr);\"><div lx class=\"cofbBut\" style=\"position:relative;min-height:40px;min-width:40px;grid-area:1\/1\/2\/5;display:flex;flex-direction:row;text-align:center;align-items:center;justify-content:center;\"><div lx class=\"lx-TextBox\" style=\"width:auto;height:auto;\">\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0440\u0430\u0431\u043e\u0447\u0435\u0433\u043e<\/div><\/div><div lx class=\"cofbBut\" style=\"position:relative;min-height:40px;min-width:40px;grid-area:2\/1\/3\/2;display:flex;flex-direction:row;text-align:center;align-items:center;justify-content:center;\"><div lx class=\"lx-TextBox\" style=\"width:auto;height:auto;\">-2<\/div><\/div><div lx class=\"cofbBut\" style=\"position:relative;min-height:40px;min-width:40px;grid-area:2\/2\/3\/3;display:flex;flex-direction:row;text-align:center;align-items:center;justify-content:center;\"><div lx class=\"lx-TextBox\" style=\"width:auto;height:auto;\">-1<\/div><\/div><div lx class=\"cofbBut\" style=\"position:relative;min-height:40px;min-width:40px;grid-area:2\/3\/3\/4;display:flex;flex-direction:row;text-align:center;align-items:center;justify-content:center;\"><div lx class=\"lx-TextBox\" style=\"width:auto;height:auto;\">+1<\/div><\/div><div lx class=\"cofbBut\" style=\"position:relative;min-height:40px;min-width:40px;grid-area:2\/4\/3\/5;display:flex;flex-direction:row;text-align:center;align-items:center;justify-content:center;\"><div lx class=\"lx-TextBox\" style=\"width:auto;height:auto;\">+2<\/div><\/div><div lx class=\"cofbBut\" style=\"position:relative;min-height:40px;min-width:40px;grid-area:3\/1\/4\/5;display:flex;flex-direction:row;text-align:center;align-items:center;justify-content:center;\"><div lx class=\"lx-TextBox\" style=\"width:auto;height:auto;\">\u041e\u0431\u043c\u0435\u043d\u044f\u0442\u044c \u043a\u0443\u0431\u0438\u043a \u043d\u0430 \u0434\u0432\u0443\u0445 \u0440\u0430\u0431\u043e\u0447\u0438\u0445<\/div><\/div><\/div>","lx":[{"geom":"1,2|5,6","type":"Box","renderIndex":0},{"key":"back","geom":"1,3|5,7","type":"Box","renderIndex":1},{"key":"tread","geom":"1,2|5,6","type":"Box","renderIndex":2,"__ps":"lx.GridPositioningStrategy;ds:1;if:3;i:10px,10px,10px,10px,10px,10px;c:4;t:2;m:1111,1111,1111"},{"key":"lbl","type":"Box","renderIndex":3,"__ps":"lx.AlignPositioningStrategy;ds:1;if:3;d:2;h:2;v:6"},{"key":"text","geom":"2,1|6,5","type":"TextBox","renderIndex":4},{"key":"m2","type":"Box","renderIndex":5,"__ps":"lx.AlignPositioningStrategy;ds:1;if:3;d:2;h:2;v:6"},{"key":"text","geom":"2,1|6,5","type":"TextBox","renderIndex":6},{"key":"m1","type":"Box","renderIndex":7,"__ps":"lx.AlignPositioningStrategy;ds:1;if:3;d:2;h:2;v:6"},{"key":"text","geom":"2,1|6,5","type":"TextBox","renderIndex":8},{"key":"p1","type":"Box","renderIndex":9,"__ps":"lx.AlignPositioningStrategy;ds:1;if:3;d:2;h:2;v:6"},{"key":"text","geom":"2,1|6,5","type":"TextBox","renderIndex":10},{"key":"p2","type":"Box","renderIndex":11,"__ps":"lx.AlignPositioningStrategy;ds:1;if:3;d:2;h:2;v:6"},{"key":"text","geom":"2,1|6,5","type":"TextBox","renderIndex":12},{"key":"add","type":"Box","renderIndex":13,"__ps":"lx.AlignPositioningStrategy;ds:1;if:3;d:2;h:2;v:6"},{"key":"text","geom":"2,1|6,5","type":"TextBox","renderIndex":14}],"js":"const menuBox = Snippet.widget;\nconst butM2 = menuBox.find('m2');\nconst butM1 = menuBox.find('m1');\nconst butP2 = menuBox.find('p2');\nconst butP1 = menuBox.find('p1');\nconst butAdd = menuBox.find('add');\n\n\nmenuBox.open = function() {\n\tbutM2.show();\n\tbutM1.show();\n\tbutP1.show();\n\tbutP2.show();\n\n\tvar gamer = bgGame.gamer();\n\tif ( !gamer.plan.locus['worker'].chips.length ) {\n\t\tbutM2.hide();\n\t\tbutM1.hide();\n\t\tbutP1.hide();\n\t\tbutP2.hide();\n\t}\n\tif ( !gamer.knows('k8') ) {\n\t\tbutM2.hide();\n\t\tbutP2.hide();\n\t}\n\n\tvar bonus = '';\n\tvar text = '\u041e\u0431\u043c\u0435\u043d\u044f\u0442\u044c \u043a\u0443\u0431\u0438\u043a \u043d\u0430 \u0434\u0432\u0443\u0445 \u0440\u0430\u0431\u043e\u0447\u0438\u0445';\n\n\t\tvar gamer = bgGame.gamer();\n\tif ( gamer.knows('k14') ) bonus = '\u0434\u0432\u0430 \u0440\u0430\u0431\u043e\u0447\u0438\u0445';\n\tif ( gamer.knows('k13') ) {\n\t\tif (bonus == '') bonus = '\u0441\u043b\u0438\u0442\u043e\u043a \u0441\u0435\u0440\u0435\u0431\u0440\u0430';\n\t\telse bonus += ', \u0441\u043b\u0438\u0442\u043e\u043a \u0441\u0435\u0440\u0435\u0431\u0440\u0430';\n\t}\n\tif (bonus != '') text += '. \u0412\u0430\u0448 \u0431\u043e\u043d\u0443\u0441: \u0435\u0449\u0435 ' + bonus + '.';\n\n\tthis.find('add').text(text);\n\n\tthis.show();\n};\n\n\nmenuBox.childrenByKeys.back.click(()=>menuBox.hide());\nbutM2.click(()=>__incCube(-2));\nbutM1.click(()=>__incCube(-1));\nbutP1.click(()=>__incCube( 1));\nbutP2.click(()=>__incCube( 2));\nbutAdd.click(()=>__changeCubeToWorker());\n\n\nfunction __incCube(val) {\n\tmenuBox.hide();\n\n\t\tbgGame.gamer().plan.locus['worker'].delChips(1);\n\tbgGame.activeCube.incValue(val);\n\tcofb.world.clearSpiritStaff();\n\tcofb.EventSupervisor.trigger('cofb_active_cube_changed', bgGame.activeCube.value);\n}\n\nfunction __changeCubeToWorker() {\n\tmenuBox.hide();\n\n\t\tbgGame.gamer().changeCubeToWorker();\n}"}